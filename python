import hashlib
from cryptography.fernet import Fernet

def encrypt_text(text, key):
    salt = hashlib.sha256(key.encode()).digest()
    cipher = Fernet(salt)
    encrypted_text = cipher.encrypt(text.encode())
    return encrypted_text

def decrypt_text(encrypted_text, key):
    salt = hashlib.sha256(key.encode()).digest()
    cipher = Fernet(salt)
    decrypted_text = cipher.decrypt(encrypted_text).decode()
    return decrypted_text

print("文本加密和解密命令行工具")

while True:
    print("\n请选择操作：")
    print("1. 加密文本")
    print("2. 解密文本")
    print("3. 退出程序")

    choice = input("请选择操作（输入数字）：")

    if choice == '3':
        print("谢谢使用，再见！")
        break

    text = input("请输入要处理的文本：")
    key = input("请输入密钥：")

    if choice == '1':
        encrypted_text = encrypt_text(text, key)
        print("加密后的文本：", encrypted_text)
    elif choice == '2':
        decrypted_text = decrypt_text(text, key)
        print("解密后的文本：", decrypted_text)
    else:
        print("无效的选择，请重新输入。")
